
<!DOCTYPE html>
<html>
<head>
  <title>English Assessment (SSO)</title>
  <script>
    // Get the base URL from where this embed is being served
    const baseUrl = new URL(document.baseURI).origin;
    // Your application's actual domain
    const appDomain = "https://mood-navigator-assessment.lovable.app";
    
    // This function would be called by LearnWorlds when a user is logged in
    function initSSO(userData) {
      // Example userData from LearnWorlds would include email and a token
      // In a real implementation, LearnWorlds would provide this data
      const email = userData.email;
      const token = userData.token; // JWT token from LearnWorlds
      
      // Redirect to SSO login endpoint with token and language
      document.getElementById('assessment').src = 
        `${appDomain}/sso-login?token=${token}&email=${email}&lang=en`;
    }
  </script>
</head>
<body style="margin:0;padding:0;overflow:hidden;">
  <iframe 
    id="assessment"
    src="https://mood-navigator-assessment.lovable.app/login/en"
    width="100%" 
    height="800"
    frameborder="0"
    allow="fullscreen"
  ></iframe>
  
  <!-- This would be replaced with the actual LearnWorlds SDK integration -->
  <script>
    // Sample placeholder for LearnWorlds SDK initialization
    // In reality, LearnWorlds would provide their own SDK or API
    console.log("LearnWorlds SDK would initialize here and call initSSO() with user data");
  </script>
</body>
</html>
